{"Id":20,"Title":"svn钩子同步代码","Slug":"svn-hack","Text":"shell代码如下：\n\n\n    #!/bin/sh\n    export LANG=en_US.UTF-8\n    PATH=/usr/bin\n    SVN=$PATH/svn\n    SVN_LOGIN_INFO=\"--username ***** --password ********\"\n    #SVN_LOG=/var/log/svn/${DATE}-svn.log\n    SVN_SRC=/opt/code_src/shop-yun/\n    WEB_SRC=/opt/www-data/shop-yun/\n    RSYNC=/$PATH/rsync\n    DATE=`/bin/date +%Y%m%d`\n     \n    # svn update\n    ${SVN} update ${SVN_LOGIN_INFO} ${SVN_SRC}\n     \n    # rsync to web from src\n    ${RSYNC} -aH --delete --progress --exclude=\".svn/,conf/app.ini\" ${SVN_SRC} ${WEB_SRC} \u003e\u003e /var/log/rsync-self.log.$DATE\n    /bin/chown -R www-data:www-data ${WEB_SRC}\n    ${RSYNC} -avzuP  --exclude-from=/opt/code/shop-yun/hooks/rsync_admin_list.conf  ${WEB_SRC}  root@63.***.**.**::website  \u003e\u003e /var/log/rsync-svn.log.$DATE","Tags":["shell"],"CreateTime":1415966401,"EditTime":1416015984,"UpdateTime":1415966401,"IsComment":true,"IsLinked":false,"AuthorId":5,"Template":"blog.html","Type":"article","Status":"publish","Format":"markdown","Comments":[],"Hits":8}